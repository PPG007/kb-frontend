import{d as N,u as W,i as X,j as Z,k as ee,l as se,m as te,n as S,p as k,q as e,s as le,v as oe,x as ce,R as E,y as ae,z as re,A as ie,B as de,C as ue,D as F,E as I,F as me,G as ne,H as he,o as ve,L as pe,I as ye,J as xe,K as _e,M as T,N as ge,O as H}from"./app-CKJ8X0K4.js";const fe=["/","/axios/","/css/","/dart/","/es6/","/html/","/i18next/","/javascript/","/koa/","/react/","/typescript/","/vue2/","/vue3/","/axios/docs/cancel_request.html","/axios/docs/common_apis.html","/axios/docs/default_settings.html","/axios/docs/interceptor.html","/axios/docs/response_process.html","/axios/docs/start.html","/css/docs/background.html","/css/docs/border.html","/css/docs/box_model.html","/css/docs/color.html","/css/docs/flex.html","/css/docs/font.html","/css/docs/layout.html","/css/docs/link.html","/css/docs/outline.html","/css/docs/pseudo-element.html","/css/docs/pseudo_class.html","/css/docs/selector.html","/css/docs/text.html","/dart/docs/async.html","/dart/docs/callableClass.html","/dart/docs/class.html","/dart/docs/exception.html","/dart/docs/function.html","/dart/docs/generators.html","/dart/docs/generics.html","/dart/docs/importantConcept.html","/dart/docs/innerType.html","/dart/docs/operator.html","/dart/docs/processControl.html","/dart/docs/start.html","/dart/docs/variables.html","/es6/docs/array_expansion.html","/es6/docs/async.html","/es6/docs/class_basic.html","/es6/docs/class_extends.html","/es6/docs/function_expansion.html","/es6/docs/let_const.html","/es6/docs/map.html","/es6/docs/module.html","/es6/docs/object_expansion.html","/es6/docs/object_new_function.html","/es6/docs/operator_expansion.html","/es6/docs/promise.html","/es6/docs/string_expansion.html","/es6/docs/variable_destructuring_assignment.html","/html/docs/URL.html","/html/docs/element_attributes.html","/html/docs/form.html","/html/docs/image.html","/html/docs/link.html","/html/docs/list.html","/html/docs/meta.html","/html/docs/multimedia.html","/html/docs/other.html","/html/docs/semantic_structure.html","/html/docs/table.html","/html/docs/text.html","/i18next/docs/basic.html","/javascript/docs/async.html","/javascript/docs/basic.html","/javascript/docs/builtin.html","/javascript/docs/data_type.html","/javascript/docs/dom.html","/javascript/docs/event.html","/javascript/docs/grammar.html","/javascript/docs/oop.html","/javascript/docs/operator.html","/koa/docs/context.html","/koa/docs/error-handling.html","/koa/docs/middleware.html","/koa/docs/request.html","/koa/docs/response.html","/koa/docs/router.html","/koa/docs/start.html","/react/docs/cli.html","/react/docs/component.html","/react/docs/context.html","/react/docs/effect.html","/react/docs/hello.html","/react/docs/hooks.html","/react/docs/jsx.html","/react/docs/lifecycle.html","/react/docs/props.html","/react/docs/reducer.html","/react/docs/redux.html","/react/docs/ref.html","/react/docs/router.html","/react/docs/state.html","/typescript/docs/advance.html","/typescript/docs/basic.html","/typescript/docs/start.html","/vue2/docs/MVVM.html","/vue2/docs/builtin_command.html","/vue2/docs/class_style.html","/vue2/docs/cli_proxy.html","/vue2/docs/component.html","/vue2/docs/component_event.html","/vue2/docs/computed.html","/vue2/docs/condition.html","/vue2/docs/data_bind.html","/vue2/docs/data_proxy.html","/vue2/docs/el_data.html","/vue2/docs/event.html","/vue2/docs/event_bus.html","/vue2/docs/filter.html","/vue2/docs/life_cycle.html","/vue2/docs/list.html","/vue2/docs/publish_subscribe.html","/vue2/docs/self_command.html","/vue2/docs/slot.html","/vue2/docs/start.html","/vue2/docs/storage.html","/vue2/docs/vue_cli.html","/vue2/docs/vue_resource.html","/vue2/docs/vue_router.html","/vue2/docs/vuex.html","/vue2/docs/watch.html","/vue3/docs/common_composition.html","/vue3/docs/new_component.html","/vue3/docs/other_composition.html","/vue3/docs/others.html","/vue3/docs/start.html","/404.html","/axios/docs/","/css/docs/","/dart/docs/","/es6/docs/","/html/docs/","/i18next/docs/","/javascript/docs/","/koa/docs/","/react/docs/","/typescript/docs/","/vue2/docs/","/vue3/docs/"],be="SLIMSEARCH_QUERY_HISTORY",x=T(be,[]),ke=()=>{const{queryHistoryCount:o}=H;return{enabled:o>0,queryHistories:x,addQueryHistory:i=>{x.value=Array.from(new Set([i,...x.value.slice(0,o-1)]))},removeQueryHistory:i=>{x.value=[...x.value.slice(0,i),...x.value.slice(i+1)]}}},L=o=>fe[o.id]+("anchor"in o?`#${o.anchor}`:""),He="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:M}=H,_=T(He,[]),we=()=>({enabled:M>0,resultHistories:_,addResultHistory:r=>{{const i={link:L(r),display:r.display};"header"in r&&(i.header=r.header),_.value=[i,..._.value.slice(0,M-1)]}},removeResultHistory:r=>{_.value=[..._.value.slice(0,r),..._.value.slice(r+1)]}}),je=o=>{const{page:r,routeLocale:i}=me(),w=ne(),c=S(0),g=k(()=>c.value>0),m=he([]);return ve(()=>{const{search:j,terminate:v}=pe(),f=xe(p=>{const{resultsFilter:R=l=>l,querySplitter:y,suggestionsFilter:D,...a}=w.value;p?(c.value+=1,j(p,i.value,a).then(l=>R(l,p,i.value,r.value)).then(l=>{c.value-=1,m.value=l}).catch(l=>{console.warn(l),c.value-=1,c.value||(m.value=[])})):m.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});ye([o,i],([p])=>f(p.join(" "))),_e(()=>{v()})}),{isSearching:g,results:m}};var qe=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(o,{emit:r}){const i=W(),w=X(),c=Z(ee),{addQueryHistory:g,queryHistories:m,removeQueryHistory:j}=ke(),{resultHistories:v,addResultHistory:f,removeResultHistory:p}=we(),R=se(o,"queries"),{results:y,isSearching:D}=je(R),a=te({isQuery:!0,index:0}),l=S(0),n=S(0),$=k(()=>m.value.length>0||v.value.length>0),q=k(()=>y.value.length>0),Q=k(()=>y.value[l.value]||null),U=()=>{const{isQuery:s,index:t}=a;t===0?(a.isQuery=!s,a.index=s?v.value.length-1:m.value.length-1):a.index=t-1},O=()=>{const{isQuery:s,index:t}=a;t===(s?m.value.length-1:v.value.length-1)?(a.isQuery=!s,a.index=0):a.index=t+1},P=()=>{l.value=l.value>0?l.value-1:y.value.length-1,n.value=Q.value.contents.length-1},V=()=>{l.value=l.value<y.value.length-1?l.value+1:0,n.value=0},Y=()=>{n.value<Q.value.contents.length-1?n.value+=1:V()},B=()=>{n.value>0?n.value-=1:P()},C=s=>s.map(t=>ge(t)?t:e(t[0],t[1])),z=s=>{if(s.type==="customField"){const t=de[s.index]||"$content",[h,d=""]=ue(t)?t[w.value].split("$content"):t.split("$content");return s.display.map(u=>e("div",C([h,...u,d])))}return s.display.map(t=>e("div",C(t)))},b=()=>{l.value=0,n.value=0,r("updateQuery",""),r("close")},G=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},c.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((s,t)=>{const h=a.isQuery&&a.index===t;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{r("updateQuery",s)}},e("div",[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},s),e("button",{type:"button",class:"slimsearch-remove-icon",title:c.value.remove,"aria-label":c.value.remove,innerHTML:I,onClick:d=>{d.preventDefault(),d.stopPropagation(),j(t)}})]))}))])),J=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},c.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((s,t)=>{const h=!a.isQuery&&a.index===t;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e(E,{to:s.link,onClick:()=>{b()}},()=>[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[s.header?e("div",{class:"slimsearch-record-content-header"},s.header):null,e("div",s.display.map(d=>C(d)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:c.value.remove,"aria-label":c.value.remove,innerHTML:I,onClick:d=>{d.preventDefault(),d.stopPropagation(),p(t)}})]))}))]));return le("keydown",s=>{if(o.isFocusing){if(q.value){if(s.key==="ArrowUp")B();else if(s.key==="ArrowDown")Y();else if(s.key==="Enter"){const t=Q.value.contents[n.value];g(o.queries.join(" ")),f(t),i.push(L(t)),b()}}else if(s.key==="ArrowUp")U();else if(s.key==="ArrowDown")O();else if(s.key==="Enter"){const{index:t}=a;a.isQuery?(s.preventDefault(),r("updateQuery",m.value[t])):(i.push(v.value[t].link),b())}}}),oe([l,n],()=>{var s;(s=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:o.queries.length?!q.value:!$.value}]},o.queries.length?D.value?e(ce,{hint:c.value.searching}):q.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},y.value.map(({title:s,contents:t},h)=>{const d=l.value===h;return e("div",{class:["slimsearch-record",{active:d}],role:"group","aria-selected":d},[e("div",{class:"slimsearch-record-title"},s||c.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},t.map((u,K)=>{const A=d&&n.value===K;return e("li",{class:["slimsearch-record-matches",{active:A}],role:"option","aria-selected":A},e(E,{to:L(u),onClick:()=>{g(o.queries.join(" ")),f(u),b()}},()=>[u.type==="text"?null:e(u.type==="title"?ae:u.type==="heading"?re:ie,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",z(u))])]))}))])})):c.value.emptyResult:$.value?[G(),J()]:c.value.emptyHistory)}});export{qe as default};
