import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,g as n,f as e}from"./app-CKJ8X0K4.js";const p={};function l(h,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="消息订阅与发布" tabindex="-1"><a class="header-anchor" href="#消息订阅与发布"><span>消息订阅与发布</span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>消息订阅与发布是一种解决通信问题的思想，这里使用 <code>pubsub-js</code> 库。</p></div><h2 id="安装-pubsub-js" tabindex="-1"><a class="header-anchor" href="#安装-pubsub-js"><span>安装 <code>pubsub-js</code></span></a></h2><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">npm</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">i</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">pubsub</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">-</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="引入-pubsub" tabindex="-1"><a class="header-anchor" href="#引入-pubsub"><span>引入 <code>pubsub</code></span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">import</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">pubsub</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">from</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;pubsub-js&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="接收数据" tabindex="-1"><a class="header-anchor" href="#接收数据"><span>接收数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code><span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">mounted</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">channel</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">pubsub</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">subscribe</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;test&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,(</span><span style="--shiki-dark:#E06C75;--shiki-dark-font-style:italic;--shiki-light:#001080;--shiki-light-font-style:inherit;">msg</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span style="--shiki-dark:#E06C75;--shiki-dark-font-style:italic;--shiki-light:#001080;--shiki-light-font-style:inherit;">data</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">console</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">log</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;频道：&quot;</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">+</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">msg</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">console</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">log</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">data</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">})</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">},</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">beforeDestroy</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">pubsub</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">unsubscribe</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">channel</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>调用 pubsub 的 <code>subscribe()</code> 方法订阅消息，返回一个 ID，第一个参数是订阅的消息的名字，第二个参数是回调函数，此处回调函数如果写成普通函数，则回调函数中的 <code>this</code> 是 undefined，应当写成箭头函数，或者在 <code>methods</code> 中定义函数并在 <code>subscribe</code> 中传入。</p><h2 id="发送数据" tabindex="-1"><a class="header-anchor" href="#发送数据"><span>发送数据</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">pubsub</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">publish</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;test&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;发布成功&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>调用 pubsub 的 <code>publish()</code> 方法发布消息，第一个参数是消息，对应订阅中的第一个参数，第二个参数是要传递的数据。</p>`,12)]))}const d=i(p,[["render",l]]),r=JSON.parse('{"path":"/vue2/docs/publish_subscribe.html","title":"消息订阅与发布","lang":"zh-CN","frontmatter":{"description":"消息订阅与发布 提示 消息订阅与发布是一种解决通信问题的思想，这里使用 pubsub-js 库。 安装 pubsub-js 引入 pubsub 接收数据 调用 pubsub 的 subscribe() 方法订阅消息，返回一个 ID，第一个参数是订阅的消息的名字，第二个参数是回调函数，此处回调函数如果写成普通函数，则回调函数中的 this 是 undef...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"消息订阅与发布\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-06-14T12:53:24.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://ppg007.github.io/kb-frontend/kb-frontend/vue2/docs/publish_subscribe.html"}],["meta",{"property":"og:site_name","content":"PPG007 的文档"}],["meta",{"property":"og:title","content":"消息订阅与发布"}],["meta",{"property":"og:description","content":"消息订阅与发布 提示 消息订阅与发布是一种解决通信问题的思想，这里使用 pubsub-js 库。 安装 pubsub-js 引入 pubsub 接收数据 调用 pubsub 的 subscribe() 方法订阅消息，返回一个 ID，第一个参数是订阅的消息的名字，第二个参数是回调函数，此处回调函数如果写成普通函数，则回调函数中的 this 是 undef..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-14T12:53:24.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-14T12:53:24.000Z"}]]},"git":{"createdTime":1749905604000,"updatedTime":1749905604000,"contributors":[{"name":"Koston Zhuang","username":"","email":"koston.zhuang@maiscrm.com","commits":1}]},"readingTime":{"minutes":0.71,"words":212},"filePathRelative":"vue2/docs/publish_subscribe.md","autoDesc":true,"excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>消息订阅与发布是一种解决通信问题的思想，这里使用 <code>pubsub-js</code> 库。</p>\\n</div>\\n<h2>安装 <code>pubsub-js</code></h2>\\n<div class=\\"language-powershell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"powershell\\" style=\\"--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF\\"><pre class=\\"shiki shiki-themes one-dark-pro light-plus vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-dark:#ABB2BF;--shiki-light:#000000\\">npm</span><span class=\\"space\\"> </span><span style=\\"--shiki-dark:#ABB2BF;--shiki-light:#000000\\">i</span><span class=\\"space\\"> </span><span style=\\"--shiki-dark:#ABB2BF;--shiki-light:#000000\\">pubsub</span><span style=\\"--shiki-dark:#56B6C2;--shiki-light:#000000\\">-</span><span style=\\"--shiki-dark:#ABB2BF;--shiki-light:#000000\\">js</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>"}');export{d as comp,r as data};
